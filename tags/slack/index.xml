<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Slack on InterP Blog</title><link>https://interp.blog/tags/slack/</link><description>Recent content in Slack on InterP Blog</description><generator>Hugo -- gohugo.io</generator><language>ko-kr</language><lastBuildDate>Wed, 22 Nov 2023 21:38:53 +0900</lastBuildDate><atom:link href="https://interp.blog/tags/slack/index.xml" rel="self" type="application/rss+xml"/><item><title>Github Pull Request ë¦¬ë·° ìš”ì²­ ìë™í™”í•˜ê¸°</title><link>https://interp.blog/github-actions-pr-review-request/</link><pubDate>Wed, 22 Nov 2023 21:38:53 +0900</pubDate><guid>https://interp.blog/github-actions-pr-review-request/</guid><description>&lt;img src="https://interp.blog/github-actions-pr-review-request/feature.jpg" alt="Featured image of post Github Pull Request ë¦¬ë·° ìš”ì²­ ìë™í™”í•˜ê¸°" />&lt;p>Github ì—ì„œ Pull Request ë¥¼ ìƒì„±í•˜ë©´, CI/CD íŒŒì´í”„ë¼ì¸ì„ í†µê³¼í•´ì„œ ë¦¬ë·° ë°›ì„ ì¤€ë¹„ë¥¼ ë§ˆì³¤ìŒì—ë„ ì—¬ì „íˆ ì˜¤í”ˆë˜ì–´ ìˆëŠ” ê²½ìš°ê°€ ìˆë‹¤. ìŠ¤í¬ëŸ¼ íšŒì˜ ì‹œê°„ì— ë¦¬ë·°ë¥¼ ìš”ì²­í•´ ë³´ê¸°ë„ í•˜ê³ , ì§ì ‘ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê¸°ë„ í•˜ì§€ë§Œ.. Pull Request ê°€ ë§ì€ ê²½ìš°ì—” ì´ëŸ° ì‘ì—…ì´ ì—¬ê°„ ê·€ì°®ì€ ì¼ì´ ì•„ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;del>ë‹µë‹µí•´ì„œ ë‚´ê°€ ë›´ë‹¤ëŠ” ë§ˆìŒìœ¼ë¡œ&lt;/del> Github Actions ë¥¼ ì´ìš©í•´, Pull Request ê°€ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ ë§¤ì¼ ì•„ì¹¨ íŒ€ Slack ì±„ë„ì— &amp;lsquo;ë¦¬ë·° ìš”ì²­&amp;rsquo; ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” Workflow ë¥¼ ë§Œë“¤ì–´ ë³´ê¸°ë¡œ í–ˆë‹¤. ì—¬ê¸°ì„œëŠ” Github Action ì´ë‚˜ Workflow ì†Œê°œ ì—†ì´, ë¬¸ì œ í•´ê²° ê³¼ì •ë§Œ ì ì–´ ë‘ì—ˆë‹¤.&lt;/p>
&lt;h1 id="ëŒ€ìƒ-pull-request-ì¡°ê±´">ëŒ€ìƒ Pull Request ì¡°ê±´&lt;/h1>
&lt;ul>
&lt;li>Open&lt;/li>
&lt;li>Approval ì„ ë°›ì§€ ì•ŠìŒ&lt;/li>
&lt;li>ë§ˆì§€ë§‰ ì»¤ë°‹ì—ì„œ CI/CD íŒŒì´í”„ë¼ì¸ì„ í†µê³¼í•¨&lt;/li>
&lt;li>&lt;code>Ready for review&lt;/code> ë ˆì´ë¸”ì´ ì¡´ì¬í•¨&lt;/li>
&lt;/ul>
&lt;h1 id="workflow-ê¸°ë³¸-êµ¬ì¡°">Workflow ê¸°ë³¸ êµ¬ì¡°&lt;/h1>
&lt;p>ìš°ì„  &lt;del>ChatGPTì˜ ë„ì›€ì„ ì¡°ê¸ˆ ë°›ì•„&lt;/del> ë‹¤ìŒ 2ê°œì˜ Step ì´ í¬í•¨ëœ Job ì„ ì§€ì •í•˜ëŠ” ê²ƒë¶€í„° ì¶œë°œí–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Notify PR Review Request&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">schedule&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">cron&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0 0 * * *&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># ë§¤ì¼ 00:00&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">notify&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Get Pull Requests&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">pulls&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/github-script@v6&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">github-token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{secrets.GITHUB_TOKEN}}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;span class="sd"> // ...
&lt;/span>&lt;span class="sd"> // return ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Send Slack message&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">if&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">steps.pulls.outputs.result != &amp;#39;&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">8398a7/action-slack@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">status&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">custom&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">custom_payload&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;span class="sd"> &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ fromJSON(steps.pulls.outputs.result) }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">SLACK_WEBHOOK_URL&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.SLACK_WEBHOOK_URL }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>actions/github-script&lt;/code> ì™€ &lt;code>8398a7/action-slack&lt;/code> ì„ ì‚¬ìš©í–ˆê³ , ê°ê° &lt;code>$GITHUB_TOKEN&lt;/code> ê³¼ &lt;code>$SLACK_WEBHOOK_URL&lt;/code> Variable ì„ í•„ìš”ë¡œ í•œë‹¤.&lt;/p>
&lt;p>Github Token ì€ &lt;a class="link" href="https://docs.github.com/en/actions/security-guides/automatic-token-authentication#about-the-github_token-secret" target="_blank" rel="noopener"
>ì´ë¯¸ ë‚´ì¥ë˜ì–´ ìˆì§€ë§Œ&lt;/a>, Slack Webhook URL ì€ ì§ì ‘ ìƒì„±í•´ì„œ ë“±ë¡í•´ì•¼ í•œë‹¤.&lt;/p>
&lt;h1 id="slack-app-ìƒì„±">Slack App ìƒì„±&lt;/h1>
&lt;p>Slack Workspace ì— App ìƒì„±ì´ ê°€ëŠ¥í•œ ê³„ì •ì— ë¡œê·¸ì¸ ë˜ì–´ ìˆë‹¤ë©´, ë‹¤ìŒì„ ë”°ë¥´ë©´ ëœë‹¤.&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://api.slack.com/apps?new_app=1" target="_blank" rel="noopener"
>ë‹¤ìŒ ë§í¬&lt;/a> ë¡œ ì´ë™&lt;/li>
&lt;li>&amp;lsquo;From scratch&amp;rsquo; ë¥¼ ì„ íƒ&lt;/li>
&lt;li>App ì´ë¦„ì„ ì§€ì •í•˜ê³ , ëŒ€ìƒ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¥¼ ì„ íƒ&lt;/li>
&lt;li>App í™”ë©´ì´ ëœ¨ë©´, &amp;lsquo;Features &amp;gt; Incoming Webhooks&amp;rsquo; ì„ ì„ íƒ&lt;/li>
&lt;li>í˜ì´ì§€ í•˜ë‹¨ì— &amp;lsquo;Add New Webhook to Workspace&amp;rsquo; ë¥¼ í´ë¦­&lt;/li>
&lt;li>ì±„ë„ì„ ì¶”ê°€í•˜ë©´ ì±„ë„ì˜ Webhook URL ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;/ol>
&lt;div style="background-color: var(--body-background); width: 98%; margin:1px; padding: 20px; border-radius: 5px;font-size: .8em;display: flex;">
&lt;div style="width: 16px;margin-right: 7px; margin-left: 4px;">
ğŸª´
&lt;/div>
&lt;div>
&amp;lsquo;Display Information&amp;rsquo;ì—ì„œ App ì•„ì´ì½˜ê³¼ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì„ íƒí•  ìˆ˜ë„ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì.
&lt;/div>
&lt;/div>
&lt;p>ì´ì œ ì´ Webhook URL ì„ Github Secret ìœ¼ë¡œ ë“±ë¡í•˜ë©´ ëœë‹¤. &lt;em>Settings &amp;gt; Secrets and variables&lt;/em> ì—ì„œ ë“±ë¡ì´ ê°€ëŠ¥í•˜ë©°, ìœ„ì—ì„œ ì§€ì •í•œ ê²ƒ ì²˜ëŸ¼ &lt;code>SLACK_WEBHOOK_URL&lt;/code> ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë“±ë¡í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;h1 id="rest-api-graphql-api">REST API? GraphQL API!&lt;/h1>
&lt;p>ì²« ë²ˆì§¸ step ì¸ &lt;code>actions/github-script&lt;/code> ì„ ì±„ì›Œë³´ì.&lt;/p>
&lt;p>REST API ë¥¼ í™œìš©í•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ê³¼, GraphQL ì„ ì§œì„œ í•œ ë²ˆì— ì¿¼ë¦¬í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤. ì½”ë“œê°€ ì¢€ ë” ê°„ê²°í•´ì§ˆ ê²ƒ ê°™ì•„ ë‘ ë²ˆì§¸ ë°©ë²•ì„ ì‚¬ìš©í–ˆëŠ”ë°, ì²« ë²ˆì§¸ ë°©ë²•ì„ í†µí•´ ìˆœì°¨ì ìœ¼ë¡œ ì¿¼ë¦¬í•˜ëŠ” ê²ƒë„ ë¬¼ë¡  ê°€ëŠ¥í•˜ë‹¤.&lt;/p>
&lt;p>GraphQL ì— ëŒ€í•´ ì˜ ëª¨ë¥´ê² ë‹¤ë©´, &lt;a class="link" href="https://graphql-kr.github.io/learn/" target="_blank" rel="noopener"
>ì´ ë¬¸ì„œ&lt;/a> ë¥¼ ì°¸ê³ í•˜ì. Github GraphQL API ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ &lt;a class="link" href="https://docs.github.com/ko/graphql" target="_blank" rel="noopener"
>ì´ ë¬¸ì„œ&lt;/a> ë„ ì°¸ê³ í•˜ì.&lt;/p>
&lt;p>ìš°ì„ , ëŒ€ìƒì´ ë˜ëŠ” ì •ë³´(&lt;em>ì œëª©, URL, ë¦¬ë·° ìƒíƒœ, ë ˆì´ë¸”, ìµœê·¼ ì»¤ë°‹ì˜ ìƒíƒœ&lt;/em>) ë¥¼ ëª¨ë‘ ë½‘ì•„ì™€ì•¼ í•˜ë¯€ë¡œ, ì•„ë˜ì™€ ê°™ì€ ì¿¼ë¦¬ê°€ í•„ìš”í•˜ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-graphql" data-lang="graphql">&lt;span class="kd">query&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">repository&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="py">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;${context.repo.owner}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;${context.repo.repo}&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">pullRequests&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="py">states&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">OPEN&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">first&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">100&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">nodes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">title&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">url&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">reviewDecision&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">labels&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="py">first&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">10&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">nodes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">name&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">commits&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="py">last&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">nodes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">commit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">statusCheckRollup&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">state&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´ ì¿¼ë¦¬ëŠ” í˜„ì¬ ë‹´ë‹¹í•˜ëŠ” í”„ë¡œì íŠ¸ í¬ê¸°ì— ë§ì¶° ëª‡ ê°€ì§€ ì œì•½ì„ ë’€ë‹¤. Open ëœ Pull Request ê°€ 100ê°œë¥¼ ë„˜ì§€ ì•Šê³ , Label ì´ 10ê°œ ë¯¸ë§Œìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” í”„ë¡œì íŠ¸ í™˜ê²½ì´ì–´ì•¼ ìœ íš¨í•˜ë‹¤. ì»¤ë‹¤ë€ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì°¸ê³ í•´ì•¼ í•œë‹¤.&lt;/p>
&lt;p>ì—¬ê¸° &lt;code>repository&lt;/code> ë¥¼ ì§€ì •í•  ë•Œ &lt;code>${context.repo}&lt;/code> ì˜ ê°’ì„ ì¼ëŠ”ë°, ì´ëŠ” &lt;code>github-scripts&lt;/code> ì—ì„œ ì œê³µí•˜ëŠ” ë³€ìˆ˜ì´ë‹¤. ìì„¸í•œ ë‚´ìš©ì€ &lt;a class="link" href="https://github.com/actions/toolkit/blob/main/packages/github/src/context.ts" target="_blank" rel="noopener"
>ì´ ì†ŒìŠ¤ì½”ë“œ&lt;/a> ë¥¼ ì°¸ê³ í•´ë„ ë˜ì§€ë§Œ, ì§€ê¸ˆì€ &amp;lsquo;&lt;em>í˜„ì¬ project ì˜ owner/repo ì´ë¦„&lt;/em>&amp;rsquo; ì„ ì˜ë¯¸í•œë‹¤ê³ ë§Œ ì•Œì•„ë‘ì.&lt;/p>
&lt;h1 id="github-scripts-ì™„ì„±">Github Scripts ì™„ì„±&lt;/h1>
&lt;p>ì´ì œ GraphQL ì„ ì‚¬ìš©í•´ì„œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³ , ê²°ê³¼ë¥¼ í•„í„°ë§í•´ Map í˜•íƒœë¡œ ë°˜í™˜í•´ë³´ì. ì°¸ê³ ë¡œ &lt;code>github-scripts&lt;/code> ëŠ” Javascript ë¥¼ ì‚¬ìš©í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Get Pull Requests&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">pulls&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/github-script@v6&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">github-token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{secrets.GITHUB_TOKEN}}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;span class="sd"> const query = `...` // ìœ„ì˜ GraphQL ì¿¼ë¦¬
&lt;/span>&lt;span class="sd">
&lt;/span>&lt;span class="sd"> const result = await github.graphql(query);
&lt;/span>&lt;span class="sd"> const prs = result.repository.pullRequests.nodes;
&lt;/span>&lt;span class="sd">
&lt;/span>&lt;span class="sd"> const filteredPRs = prs.filter(pr =&amp;gt;
&lt;/span>&lt;span class="sd"> pr.reviewDecision !== &amp;#39;APPROVED&amp;#39; &amp;amp;&amp;amp;
&lt;/span>&lt;span class="sd"> pr.labels.nodes.find(label =&amp;gt; label.name === &amp;#39;Ready for review&amp;#39;) &amp;amp;&amp;amp;
&lt;/span>&lt;span class="sd"> pr.commits.nodes[0].commit.statusCheckRollup.state === &amp;#34;SUCCESS&amp;#34;
&lt;/span>&lt;span class="sd"> );
&lt;/span>&lt;span class="sd">
&lt;/span>&lt;span class="sd"> if (filteredPRs.length &amp;gt; 0) {
&lt;/span>&lt;span class="sd"> // Slack message block ìƒì„±
&lt;/span>&lt;span class="sd"> }&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>filteredPRs&lt;/code> ì—ëŠ” ìœ„ì—ì„œ ì •ì˜í•œ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” Pull Request ë“¤ì´ ë‹´ê¸´ë‹¤. ì´ì œ ì´ ì •ë³´ë¥¼ Slack message block ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ë³´ë‚´ë©´ ëœë‹¤.&lt;/p>
&lt;h1 id="í†µí•©-ë¬¸ì œ">í†µí•© ë¬¸ì œ&lt;/h1>
&lt;p>ì—¬ê¸°ì„œ ë‘ ê°€ì§€ ë‚œê´€ì´ ìˆì—ˆëŠ”ë°,&lt;/p>
&lt;ul>
&lt;li>Step ê°„ì— JSON ìœ¼ë¡œ ì •ë³´ êµí™˜ì´ ê°€ëŠ¥í•œê°€&lt;/li>
&lt;li>Slack message ë¥¼ ì¼ë°˜ í…ìŠ¤íŠ¸ê°€ ì•„ë‹ˆë¼, ë©‹ì§€ê²Œ ë§Œë“œë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ëŠ”ê°€&lt;/li>
&lt;/ul>
&lt;p>ì²« ë²ˆì§¸ëŠ” ì‰½ê²Œ í•´ê²°í–ˆë‹¤. &lt;code>fromJSON()&lt;/code> ì„ í™œìš©í•˜ë©´ &lt;code>github-scripts&lt;/code> ì—ì„œ ë°˜í™˜ë˜ëŠ” (ë”°ì˜´í‘œê°€ ì „ë¶€ escape ëœ) JSON String ì„ ê·¸ëŒ€ë¡œ ë°›ì•„ë‹¤ ì“¸ ìˆ˜ ìˆì—ˆë‹¤. ë”ìš± ìì„¸í•œ ë‚´ìš©ì€ &lt;a class="link" href="https://github.blog/changelog/2020-04-15-github-actions-new-workflow-features/#expressions-in-jobcontinue-on-error" target="_blank" rel="noopener"
>ë¸”ë¡œê·¸ ë¬¸ì„œ&lt;/a> ë¥¼ ì°¸ê³ í•˜ì.&lt;/p>
&lt;p>ë‘ ë²ˆì§¸ê°€ ì¡°ê¸ˆ ì–´ë ¤ì› ëŠ”ë°, ê²°êµ­ ì°¾ì•˜ë‹¤. ë‹¤ìŒ ë§¤ë‰´ì–¼ê³¼ Playground í˜ì´ì§€ë¥¼ í†µí•´ Slack ì˜ (Block-kit ì´ë¼ê³  í•˜ëŠ”) custom message êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  ë§Œë“¤ì–´ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ë§¤ë‰´ì–¼: &lt;a class="link" href="https://api.slack.com/reference/block-kit" target="_blank" rel="noopener"
>https://api.slack.com/reference/block-kit&lt;/a>&lt;/li>
&lt;li>Playground: &lt;a class="link" href="https://api.slack.com/tools/block-kit-builder" target="_blank" rel="noopener"
>https://api.slack.com/tools/block-kit-builder&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ê·¸ëŸ¬ë©´ ë¬¸ì œëŠ” ì¢€ ë” ê°„ë‹¨í•´ì§„ë‹¤.&lt;/p>
&lt;ol>
&lt;li>&lt;code>github-scripts&lt;/code> ì—ì„œëŠ” Slack Message êµ¬ì¡°ë¥¼ ì „ë¶€ ë§Œë“¤ì–´ì„œ JSON ìœ¼ë¡œ ë‚´ë³´ë‚´ê³ &lt;/li>
&lt;li>&lt;code>action-slack&lt;/code> ì—ì„œëŠ” JSON ìì²´ë¥¼ ë°›ì•„ì„œ ì¶œë ¥í•˜ë©´ ëœë‹¤.&lt;/li>
&lt;/ol>
&lt;h2 id="slack-message-êµ¬ì¡°-ìƒì„±">Slack message êµ¬ì¡° ìƒì„±&lt;/h2>
&lt;p>ë‹¤ì‹œ &lt;code>github-scripts&lt;/code> step ìœ¼ë¡œ ëŒì•„ê°€ ë³´ì. ì œì¼ ì²˜ìŒì— í—¤ë”ê°€ ë˜ëŠ” block ì„ ë¯¸ë¦¬ ì§€ì •í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">blocks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;header&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;plain_text&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;ğŸ‘€ PR ëª©ë¡&amp;#34;&lt;/span>&lt;span class="p">}},&lt;/span>
&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;divider&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="p">];&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê·¸ ë‹¤ìŒ, &lt;code>filteredPRs&lt;/code> ê²°ê³¼ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°ì— &lt;code>blocks&lt;/code> ì•ˆì— ë©”ì‹œì§€ë¥¼ ì±„ì›Œë„£ëŠ”ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">filteredPRs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Slack message block ìƒì„±
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">blocks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">({&lt;/span>
&lt;span class="s2">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;section&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;mrkdwn&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">filteredPRs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">pr&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="sb">`â€¢ &amp;lt;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">pr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">|*&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">pr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">title&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">*&amp;gt; `&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;\n&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë§ˆì§€ë§‰ìœ¼ë¡œ, &lt;code>blocks&lt;/code> ë¥¼ ë°˜í™˜í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript"> &lt;span class="c1">// ë””ë²„ê¹…
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">JSON&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stringify&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">blocks&lt;/span> &lt;span class="p">}));&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">JSON&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stringify&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">blocks&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="slack-step-ì™„ì„±">Slack Step ì™„ì„±&lt;/h2>
&lt;p>&lt;code>pulls&lt;/code> step ì—ì„œ ë°˜í™˜ëœ ê°’ì„ JSON ìœ¼ë¡œ ë³€í™˜í•´ ê·¸ëŒ€ë¡œ ë„£ëŠ”ë‹¤. ë§¨ ì²˜ìŒ Step ê³¼ í¬ê²Œ ë‹¬ë¼ì§„ ê²ƒì€ ì—†ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Send Slack message&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">if&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">steps.pulls.outputs.result != &amp;#39;&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">8398a7/action-slack@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">status&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">custom&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">custom_payload&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;span class="sd"> &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ fromJSON(steps.pulls.outputs.result) }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">SLACK_WEBHOOK_URL&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.SLACK_WEBHOOK_URL }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="ë§ˆë¬´ë¦¬-ì‘ì—…">ë§ˆë¬´ë¦¬ ì‘ì—…&lt;/h1>
&lt;p>ì´ì œ ì‘ì—…ì€ ëë‚¬ê³  í…ŒìŠ¤íŠ¸ë§Œ ë‚¨ì•˜ë‹¤.&lt;/p>
&lt;h2 id="main-ì´-ì•„ë‹Œ-íŠ¹ì •-ë¸Œëœì¹˜ì—ì„œ-workflow-ì‹¤í–‰í•˜ê¸°">main ì´ ì•„ë‹Œ, íŠ¹ì • ë¸Œëœì¹˜ì—ì„œ Workflow ì‹¤í–‰í•˜ê¸°&lt;/h2>
&lt;p>ìš°ì„ , ìœ„ workflow ì—ì„œ &lt;code>on:&lt;/code> ì ˆì— ë‹¤ìŒì´ ì¶”ê°€ë˜ì–´ì•¼ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">workflow_dispatch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># ë­˜ ë” ë„£ì„ í•„ìš”ì—†ì´ ì´ê²Œ ì „ë¶€ë‹¤.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë‚˜ëŠ” &lt;code>gh&lt;/code> CLI ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ì¸í•œ ë‹¤ìŒ, ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">gh workflow run &lt;span class="s1">&amp;#39;Notify PR Review Request&amp;#39;&lt;/span> --ref &lt;span class="o">{&lt;/span>branch&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="github-scripts-ë””ë²„ê¹…">Github Scripts ë””ë²„ê¹…&lt;/h2>
&lt;p>ë¬¸ë²• ì˜¤ë¥˜ë¥¼ ì¡ê¸° ìœ„í•´ì„œëŠ”, Javascript Linter ê°€ ì‘ë™í•˜ëŠ” IDE ì—ì„œ ë¨¼ì € ì‘ì„±í•œ ë‹¤ìŒ, ì˜®ê²¨ì˜¤ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.&lt;/p>
&lt;h2 id="graphql-ë””ë²„ê¹…">GraphQL ë””ë²„ê¹…&lt;/h2>
&lt;p>API ë¬¸ì„œë¥¼ ë’¤ì ¸ë³´ë©´ Personal access token ì„ ì‚¬ìš©í•´ì„œ ì¿¼ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì¡´ì¬í•œë‹¤. ì›í•˜ëŠ” ê°’ì´ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸í•œ ë’¤ì— Github Scripts ì— ì ìš©í•´ ì£¼ì.&lt;/p>
&lt;hr>
&lt;p>ì´ Workflow ëŠ” íŠ¹ì • ì´ë²¤íŠ¸ ê¸°ë°˜ì´ ì•„ë‹ˆë¼, ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ì„œ ìƒíƒœë¥¼ ì§ì ‘ ì²´í¬í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— Workflow ê°€ ë³µì¡í•´ ì§„ ê²ƒ ê°™ë‹¤. ê·¸ë˜ë„ Github Actions ë¥¼ ì´ìš©í•˜ë©´, ì¼ì¼íˆ ë¦¬ë·° ìš”ì²­ì„ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. Github Scripts ì—ì„œ ë°˜í™˜ë˜ëŠ” ê°’ì„ ì–´ë–»ê²Œ ë°›ì•„ ì²˜ë¦¬í• ì§€ë„ ì‚¬ì‹¤ ë§‰ë§‰í–ˆëŠ”ë°, &lt;code>fromJSON()&lt;/code> ì„ ì‚¬ìš©í•˜ë‹ˆ ê°„ë‹¨í–ˆë‹¤.&lt;/p>
&lt;p>ì „í˜€ ë‹¤ë¥¸ ë¬¸ì œë¥¼ Github Actions ë¡œ ìë™í™”í•˜ë ¤ëŠ” ê²½ìš°ì—ë„, ì´ ê¸€ì´ ì—¬ëŸ¬ëª¨ë¡œ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤.&lt;/p>
&lt;figure class="align-center ">
&lt;img loading="lazy" src="image.png#center" width="70%"/>
&lt;/figure></description></item></channel></rss>