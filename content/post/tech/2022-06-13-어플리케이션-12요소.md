---
author: InterP
date: 2022-06-13T10:56:52+0900
tags: []
title: 어플리케이션의 12요소
url: "/the-twelve-factor-app/"
categories:
    - TechTech
image: ''
draft: true
---
SaaS 개발 문서를 보다 보니 '어플리케이션의 12가지 요소' 라는 사이트 링크를 타고 들어오게 되었다. 길지도 않고, 자뭇 당연한 것들이 많다. 그래도 상기해 두면 좋겠다는 생각이 들어서 아주 간단히 정리를 해 본다. 

원문: [https://12factor.net/](https://12factor.net/ "https://12factor.net/") (한글 번역본은 [여기](https://12factor.net/ko/))

### 코드베이스 (Codebase)

* **1개의 앱은, 오로지 1개의 코드 베이스로 관리되어야 한다**.
  * 앱은 1개인데 코드 베이스가 여러 개 = distributed system
  * 코드 베이스가 1개인데 앱은 여러 개 = 공통 코드를 라이브러리로 만들어, 각 앱들이 서로 다른 코드 베이스가 되도록 해야 함 (아래 의존성과 연관됨)
* 당연히 Version Control System (Git, Mercurial, Subversion) 으로 관리되어야 한다.

### 의존성 (Dependencies)

* 모든 의존성은 선언되어 있어야 한다. (`Gemfile`, `dependencies.txt`, ...) 
* 심지어는 시스템 명령어에 의존해서도 안 된다 (`curl`)

### 설정 (Config)

* 설정가능한 변수는 코드에 박혀있으면 안 되고, 반드시 설정 가능해야 한다.
* 환경변수로 설정할 수 있어야 가장 제어하기 쉽다.

### 뒷단 서비스 (Backing service)

* 앱에서 참조하는 다른 서비스들: 데이터베이스, 클라우드 저장소, SNS 
* 이런 리소스는 부착/분리 (attach/detach) 가 가능해야 한다. 즉, 설정만 바꾸면, **앱 코드 변경 없이도** 다른 서비스로 옮겨서 사용이 가능해야 한다. (물론 데이터 복구 같은 건 필요하겠지만)

### 빌드, 릴리즈, 실행 (Build, release, run)

* 빌드: 코드를 실행 가능한 번들(=빌드)로 만드는 단계
* 릴리즈: 빌드를 현재 설정과 결합하는 단계 (=릴리즈, 실행환경)
* 실행 (런타임): 릴리즈에 들어있는 앱을 실행하는 단계

이 세 단계는 철저히 구분되어야 한다. 예를 들면, 런타임에서 코드 수정을 하면 안 된다. 빌드만 가지고 바로 실행할 수 있다면, 설정에 문제가 있는 것이다. 등등.. 

* 빌드는 개발자가 코드를 수정할 때 마다 만들 수 있다. 하지만 이걸 릴리즈라고 부르지는 않는다.
* 각 릴리즈는 고유한 ID 로 구별되어야 한다. 
* 실행 단계에서 빌드 또는 릴리즈를 수행해서는 안 된다. (서버 재부팅으로 앱을 재실행해야 하는데, 컴파일 다시 한다던지.. 환경변수를 새로 잡는다던지.. 이런거 말이다.)

### 프로세스 (Process)

앱은 여러 개의 프로세스로 이뤄진다. 1개여도 된다. 

* 각 프로세스는 아무것도 공유해서는 안 된다. (shared-nothing) 
* 각 프로세스는 stateless 여야 한다. (stateful 이 되는 순간 누군가는 상태를 공유받아야 하므로 위 조건에 배치된다)

### 포트 바인딩 (Port binding)

웹 서비스를 런타임에 주입하거나 연결하는 게 아니라, 앱이 웹 서비스를 제공해야 한다. 오픈한 포트로 (공개 호스트네임으로 온 요청을) 바인딩해서 넘겨야 한다.

더 추가해야 함..