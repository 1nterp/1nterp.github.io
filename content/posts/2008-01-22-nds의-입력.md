---
title: NDSì˜ ì…ë ¥
author: interp
type: post
date: 2008-01-22T15:25:16+00:00
draft: true
private: true
url: /ndsì˜-ì…ë ¥/
categories:
  - ë¯¸ë¶„ë¥˜
tags:
  - NDS
  - ndsl

---
ë¨¼ì €, dev-sceneì— ìˆëŠ” ì˜ˆì œë¥¼ êº¼ë‚´ì™€ë³´ì.


  


> [CODE]<SPAN style="COLOR: #0000ff"><SPAN style="COLOR: #0000ff"><SPAN style="COLOR: #339900"><BR /></SPAN><FONT color=#000000><SPAN style="COLOR: #000000"><FONT color=#ffffff>#include <nds.h><BR />#include <stdio.h><BR />&nbsp;<BR />int main(void)<BR />{<BR />&nbsp;consoleDemoInit();<BR />&nbsp;<BR />&nbsp;irqInit();<BR />&nbsp; &nbsp; <BR />&nbsp;irqEnable(IRQ_VBLANK);<BR />&nbsp;<BR />&nbsp;while(1)<BR />&nbsp;{<BR />&nbsp; if(REG_KEYINPUT & KEY_A)<BR />&nbsp; &nbsp;printf("Key A is released");<BR />&nbsp; else<BR />&nbsp; &nbsp;printf("Key A is pressed");<BR />&nbsp;<BR />&nbsp; swiWaitForVBlank();<BR />&nbsp;<BR />&nbsp; consoleClear();<BR />&nbsp;}<BR />&nbsp;<BR />&nbsp;return 0;<BR />}<BR /></FONT>[/CODE]</SPAN></FONT></SPAN></SPAN>
  


(ì´.. ì´ëŸ°, íƒ­ì´ ì•ˆë¨¹í˜€-_-)  
  
ì—¬ê¸°ì„œ, REG_KEYINPUTì€ í‚¤ê°€ ëˆŒë¦° ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ë ˆì§€ìŠ¤í„°.. ì¼ë ¤ë‚˜.  
ì›ë¬¸ì—ì„œëŠ” IPC->buttonsë„ ìˆëŠ”ë°. í•œë²ˆ ì‹¤í—˜í•´ ë³´ê¸°ë¡œ í–ˆë‹¤.  
  
ë¨¼ì €, ìœ„ì˜ ì†ŒìŠ¤ë¥¼ ê·¸ëŒ€ë¡œ í•´ì„œ ë§Œë“¤ì–´ ë´¤ë‹¤.  
A í‚¤ë¥¼ ëˆ„ë¥´ê³  ìˆìœ¼ë©´ Key A is Pressed ë¼ëŠ” ë©”ì‹œì§€ê°€ ëœ¬ë‹¤.  
(ëˆ„ë¥´ê³  ìˆìœ¼ë©´.. ì— ì£¼ëª©í•˜ë„ë¡ í•˜ì.)  
ìœ„ì˜ ì†ŒìŠ¤ì—ì„œ, REG_ ì˜ ìŠ¤í…Œì´íŠ¸ ì¤‘ KEY_Aì™€ and ì‹œì¼°ì„ ë•Œ..  
ê·¸ ê°’ì´ 1ì¸ ê²½ìš°ì¼ ë•Œ released ê°€ ë˜ë‹ˆ, REG_ëŠ”.. ëˆŒë¦¬ì§€ ì•Šì€ ìƒíƒœë“¤ì„ ì €ì¥í•˜ê² ì§€?  
  
swiWaitForVBlank() ëŠ” vblank ì¸í„°ëŸ½íŠ¸ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ê±°ë‹¤.  
ê·¸ëƒ¥ ê¸°ë‹¤ë¦¬ëŠ”ê²ƒì¼ ê²ƒì´ë‹¤. ì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒí•  ë•Œ ê¹Œì§€..  
ìš” ì¸í„°ëŸ½íŠ¸ê°€.. ì–´ë–¤ ì…ë ¥ì´ ë“¤ì–´ì™”ê±°ë‚˜ ë­ ê·¸ëŸ° ê²ƒì¼ í…Œê³ .  
Whlie ëŒ€ê¸°ìƒíƒœ ì´ì „ì— irqInit() ëŠ” libndsì˜ ì¸í„°ëŸ½íŠ¸ ì‹œìŠ¤í…œ ì´ˆê¸°í™”.  
(ì¸í„°ëŸ½íŠ¸ ë°œìƒí•˜ëŠ” ì–´ëŠ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ê±´ ì¨ì¤˜ì•¼ í•˜ëŠ” êµ¬ë¬¸)  
ê·¸ë¦¬ê³  irqEnable()ì€ íŒŒë¼ë©”í„°ë¡œ ë“¤ì–´ê°€ëŠ” IRQ_MASKS ì¤‘ í•˜ë‚˜ë¥¼..  
ì¸í„°ëŸ½íŠ¸ í—ˆìš©ì‹œì¼œì£¼ëŠ” í•¨ìˆ˜ê°€ ë˜ê² ë‹¤.  
  
IRQ_MASKS?  
ì´ê²Œ ë­ëƒ.. nds/interrupts.h ë¥¼ ë³´ë©´ ì—¬ê¸° ë§ì€ ê²Œ ë‚˜ì™€ìˆë‹¤.  
VBLANK.. HBLANK.. ë‹¤ ë­ëƒ ì´ê²Œ -_-;  
ìœ„ì— ë³´ë©´ REG\_IE, REG\_IFê°€ ìˆë‹¤.  
IEëŠ” ë™ì¼í•œ í—¤ë”íŒŒì¼ì— ì •ì˜ë˜ì–´ ìˆë‹¤. Interrupt Enable Register.  
ë‚´ë¶€ ì¸í„°ëŸ½íŠ¸ë¥¼ ìœ„í•œ ì¸ì¦ ë§ˆìŠ¤í¬ê°€ ì €ì¥. (ê±°ê¸° ì íŒê±°ëŠ” ë©”ëª¨ë¦¬ ìœ„ì¹˜ë‹¤;; ì°©ì˜¤ì—†ë„ë¡)  
IFëŠ” ì¸í„°ëŸ½íŠ¸ ë²¡í„°ê°€ í•˜ë‚˜ë¿ì´ê¸° ë•Œë¬¸ì— IF ë ˆì§€ìŠ¤í„°ëŠ”&nbsp; íŠ¹ì •í•œ ì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒí•˜ë©´ ê·¸ ì¸í„°ëŸ½íŠ¸ë¥¼ ê°€ë¦¬í‚¤ëŠ” ê²ƒì„ í¬í•¨í•œë‹¤ëŠ” ê±°ë‹¤. ì˜ˆë¥¼ ë“¤ë©´ VBLANK ì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œì— ê·¸ ì¸í„°ëŸ½íŠ¸ì˜ ë¹„íŠ¸ë¥¼ ì €ì¥í•œë‹¤ëŠ” ë§ì´ ë˜ê² ë‹¤.  
  
ì—¬ê¸°ì„œ..  
ë­ u32, u16, vu32.. ì´ëŸ° ìš”ìƒí•œ ë³€ìˆ˜ëŠ” ê¸°ë³¸ ë³€ìˆ˜í˜•ì´ ì•„ë‹ˆë‹¤.  
nds/jtypes.h ì—ì„œ ëª¨ë‘ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì°¸ê³ í•´ê°€ë©° ë³´ë„ë¡ í•˜ì ğŸ™‚  
  
ë§ˆì§€ë§‰ì— consoleClear() ì€ ë§ ê·¸ëŒ€ë¡œ ì½˜ì†”ì°½ì„ ì‹¹ ì§€ìš°ëŠ” í•¨ìˆ˜ë‹¤.  
  
  
ì´ë ‡ê²Œ í•´ì„œ ì´ í•œ ì˜ˆì œì—ì„œ ëª‡ê°€ì§€ ì‚´ì§ ì§‘ì–´ë³´ì•˜ë‹¤.  
1) REG_KEYINPUTì˜ ì—­í•   
2) ì¸í„°ëŸ½íŠ¸(ì‚´ì§)  
3) consoleClear()  
  
ë¬¼ë¡ , ì´ê±´ ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ì´ê³  ê·¸ë˜í”½ì ì¸ ìš”ì†ŒëŠ” í•˜ë‚˜ë„ ì—†ê¸° ë•Œë¬¸ì—(ë¬¸ì ì œì™¸)  
í™”ë©´ì— ìƒ‰ì„ ë¿Œë¦¬ê³  í•˜ëŠ”ê±´&#8230; ë‚˜ì¤‘ì— ì•Œì•„ë³´ë„ë¡ í•˜ì.  
  
ì•„ê¹Œ ì „ì— IPC->buttons ë„ ë ê¹Œ í•˜ëŠ” ì˜ë¬¸ì„ ê°€ì¡Œì—ˆë‹¤.  
ì‹¤í—˜ ê²°ê³¼, ê·¸ëŒ€ë¡œ ëŒ€ì²´í•´ì„œëŠ” A í‚¤ë¥¼ ë°±ë²ˆ ëˆŒëŸ¬ë„ ë˜ì§€ ì•ŠëŠ”ë‹¤;;  
ê·¸ë¦¬ê³  ì›ë¬¸ì„ ì½ì–´ë³¸ ê²°ê³¼&#8230;. ã……ã…‚ ì•„ì˜ˆ ì›ë¬¸ë„ ì œëŒ€ë¡œ ëª»ì½ì—ˆë‹¤..  
ì „í˜€ ë‹¤ë¥¸ ê¸°ëŠ¥ì´ì—ˆë‹¤ ã…ã…..  
  
ë•ë¶„ì— IPCë„ íŒŒë³´ë„ë¡ í•˜ì.  
nds/ipc.h ì—ì„œ IPC ê°€ define ëœ ê²ƒì„ ì°¾ì•˜ëŠ”ë°, getIPC() ì˜ ë°˜í™˜ê°’ì´ë‹¤.  
getIPC()ëŠ” ìœ„ì— ìˆëŠ”ë°, 0x027FF000 ì£¼ì†Œì˜ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ê±°ë‹¤.  
ìš”ê±°.. ë­ì•¼-_-;  
  
TransferRegion ì´ë¼ëŠ” ë³€ìˆ˜ëŠ” ìœ„ì— êµ¬ì¡°ì²´ë¡œ ì •ì˜ë˜ì—ˆë‹¤.  
ì•ˆì— ë“¤ì–´ìˆëŠ” ê²ƒë“¤ì´ ì—„ì²­ ë§ê³ , unionë„ ìˆë‹¤ í•˜í•˜..  
(ë­”ì§€ ëª¨ë¥´ëŠ”ë°-_-;;) ì—¬ê¸°ì— uint16(u16ì´ë‹¤) buttons ê°€ ë³´ì¸ë‹¤.  
ì—¬ê¸°ì— ì €ì¥ë˜ëŠ” ê²ƒì´ë¡œê³ ! ã…ã…  
ìì„¸íˆ ë³´ë‹ˆ.. ë‚ ì§œë‚˜ ì‹œê°ì— ëŒ€í•œ ì •ë³´ë„ ìˆê³  í„°ì¹˜íŒ¨ë“œë¡œ í„°ì¹˜í•œ ê°’ë„ ìˆê³ ..  
ë°°í„°ë¦¬ ì”ëŸ‰, AUX(ì‚¬ìš´ë“œ ì¶œë ¥ ì¸ë“¯?) ê·¸ë¦¬ê³  ë‹¤ì´ì˜¤ë“œ(ì˜†ì— LEDë¥¼..?), ì˜¨ë„ ë“±ë“±..  
ë°‘ì— mail ì‹œë¦¬ì¦ˆëŠ” ë´ë„ ëª¨ë¥´ê² ë‹¤. ì£¼ì„ìœ¼ë¡œ "ë°‘ì— ê±´ ì™„ë²½í•˜ì§€ ì•Šì•„ì„œ ë³€í•  ìˆ˜ ìˆë‹¤"  
ë¼ê³  í•˜ëŠ” ê±¸ ë³´ë‹ˆ, ì•„ë§ˆë„ Wifi ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—…ë°ì´íŠ¸ ë•Œ ë°”ë€Œì—ˆê±°ë‚˜ ì›ë˜ë¶€í„° ë¶ˆì•ˆí•œ ë“¯.  
  
ì´ì œ í•˜ë‚˜ ë” ì°ì–´ë´¤ë‹¤.  
4) IPC  
  
ì, ê·¸ëŸ°ë° ì›ë¬¸ì„ ì½ë‹¤ê°€ í•˜ë‚˜ í„°ì¡Œë‹¤.  
ë°”ë¡œ L, R í‚¤ëŠ” ë‹´ë‹¹í•˜ëŠ” ë ˆì§€ìŠ¤í„°ê°€ ë‹¤ë¥´ë‹¤ëŠ”ê±°(ë­..)  
ê·¸ë¦¬ê³  ARM9ì´ ì½ì§€ ì•ŠëŠ”ë‹¤ëŠ”ê±°[ì›ë¬¸ì—ì„œëŠ” ì´ë…€ì„ì„ ë©”ì¸CPUë¡œ ì¡ì•˜ë‹¤.]  
ê·¸ëŸ¼ ë­.. ARM7ì´ ì½ì€ ë’¤ì— ARM9ì´ ì•Œì•„ë³¼ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ìˆ˜ê°€ ìˆë‹¤.  
  
ì…ë ¥ì— ëŒ€í•´ì„œ ì¢€ ë” ìì„¸íˆ ë³´ê¸° ìœ„í•´ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ë˜‘ê°™ì€ ì˜ˆì œë¥¼ êµ¬ì„±í•˜ì.


  


> 
  
> 
> 
> [CODE]<FONT color=#ffffff><SPAN style="COLOR: #339900"><BR /></SPAN></FONT><SPAN style="COLOR: #000000"><FONT color=#ffffff>#include <nds.h><BR />#include <stdio.h><BR />&nbsp;<BR />int main(void)<BR />{<BR />ã€€ consoleDemoInit();<BR />&nbsp;<BR />ã€€ irqInit();<BR />&nbsp; &nbsp; <BR />ã€€ irqEnable(IRQ_VBLANK);<BR />&nbsp;<BR />ã€€ while(1)<BR />&nbsp; {<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; scanKeys();<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int held = keysHeld();<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( held & KEY_A)<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf("Key A is pressed\n");<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf("Key A is released\n");</FONT></SPAN>
> 
> 
  
> 
> 
> <FONT color=#ffffff><SPAN style="COLOR: #000000"><FONT color=#ffffff>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( held & KEY_X)<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf("Key X is pressed\n");<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf("Key X is released\n");<BR />&nbsp;<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( held & KEY_TOUCH)<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf("Touch pad is touched\n");<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf("Touch pad is not touched\n");<BR />&nbsp;<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; swiWaitForVBlank();<BR />&nbsp;<BR />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; consoleClear();<BR />ã€€ }<BR />&nbsp;<BR />ã€€ return 0;<BR />}<BR /></FONT>[/CODE]</SPAN></FONT>

  
&nbsp;(ë…¸ê°€ë‹¤ë¡œ íƒ­ êµ¬í˜„. í”ŒëŸ¬ê·¸ì¸ ì°¾ì•„ë´ì•¼ê²Ÿë‹¤..)   
  
ìš°ë¦¬ê°€ ì•Œì•„ì•¼ í•  ê²ƒì€ scanKeys()ì™€ keysHeld() ì´ë‹¤. ê·¸ëŸ°ë°.. ë„ì¤‘ì— GBA ìŠ¤í…Œì´ì…˜ì— ê°€ë´¤ë”ë‹ˆ ê·¸ëŒ€ë¡œ ì •ë¦¬ê°€ ë˜ ìˆì—ˆë‹¤ í›„í›„..(ë‚˜ ë­í•œê²¨) scanKeysëŠ” í‚¤ê°€ ëˆŒë ¸ë‚˜ ì•ˆëˆŒë ¸ë‚˜ ì•Œì•„ë³´ëŠ” ê²ƒì´ê³  keysHeldëŠ” ì–´ë–¤ í‚¤ê°€ ëˆŒë ¸ë‚˜.. (ì—°ì†ëˆŒë¦¼ê°ì§€) keysDownì€ ì—°ì†ì ì¸ ëˆŒë¦¼ì€ ê°ì§€í•˜ì§€ ì•Šì§€ë§Œ ì—­ì‹œ í‚¤ê°€ ëˆŒë ¸ëŠ”ì§€ ê°ì§€í•œë‹¤   
  
[ ì´í•˜ ìƒëµ ]